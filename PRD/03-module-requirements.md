# 3. 모듈별 기능 요구사항

### 3.1 대시보드 (Dashboard)

**경영 대시보드**
- [ ] 월별/분기별 매출·수주 추이 차트
- [ ] 프로젝트 상태별 현황 (파이프라인 뷰)
- [ ] 납기 준수율 KPI
- [ ] 가동률 현황 (설비별/인력별)
- [ ] 원가율 추이 (목표 vs 실적)
- [ ] 지연 프로젝트 알림 리스트

**현장 대시보드 (공장 모니터 전용)**
- [ ] 오늘의 작업 현황 (칸반 보드)
- [ ] 설비별 가동 상태
- [ ] 긴급 작업 지시 알림

---

### 3.2 영업 관리 (Sales)

#### 3.2.1 견적 관리 (Quotation)
- [ ] 견적 등록 (고객, 금형 종류, 사양, 수량)
- [ ] 견적 원가 산출 보조
  - 자재비: 강재 종류·중량 기반 자동 계산
  - 가공비: 공정별 시간 × 단가 기반 산출
  - 외주비: 과거 실적 기반 추정
  - 관리비·이익률 설정
- [ ] 견적서 PDF 생성 및 이메일 발송
- [ ] 견적 이력 관리 (버전 관리)
- [ ] 견적 → 수주 전환

#### 3.2.2 수주 관리 (Order)
- [ ] 수주 등록 (견적 기반 또는 직접 등록)
- [ ] 수주 확인서 생성
- [ ] 납기 일정 설정
- [x] 수주 → 프로젝트 자동 생성 (`CreateOrderWithProjectUseCase`)
- [x] 수주 생성 시 설계 공정 4단계 자동 시드 (DESIGN_3D/2D/REVIEW/BOM — idempotent)
- [ ] 수주 현황 조회 (목록/캘린더 뷰)

#### 3.2.3 고객 관리 (Customer)
- [ ] 고객사 정보 관리 (회사명, 담당자, 연락처)
- [ ] 고객별 거래 이력 조회
- [ ] 고객별 매출 분석

---

### 3.3 설계 관리 (Engineering)

> **핵심 원칙**: 설계는 사이드바에서 **독립 메뉴(/design)**로 분리되어 설계 공정 현황, 설계자 업무 부하, BOM, ECO를 관리한다.
> 내부적으로는 공정 단계(ProcessStep)의 일부로서 작업 지시 → 실적 입력 → 원가 집계의 동일한 흐름을 따르며,
> 설계자의 투입 시간이 프로젝트 노무비에 자동 반영된다.

#### 3.3.1 프로젝트 관리
- [ ] 프로젝트 생성 (수주 기반 자동 / 수동)
- [ ] 프로젝트 기본 정보 (금형 종류, 사양, 캐비티 수, 소재 등)
- [x] 프로젝트 캘린더 (/projects/calendar — 월별 캘린더 뷰, 시작일/납기일/완료일 표시, 납기 지연 경고, 다가오는 납기 사이드바, 프로젝트 기간 바 차트)
- [ ] 프로젝트 타임라인 (간트 차트 — 설계 공정 포함)
- [x] 프로젝트 상태 자동 전환 (공정 진행 상태 기반, §2.2 참조 — `resolveProjectStatusFromSteps`, forward-only)
- [ ] 프로젝트별 파일 첨부 (2D/3D 도면, 사양서)

#### 3.3.2 설계 공정 관리
설계는 아래 세부 공정으로 구성되며, 각각 작업 지시/실적 체계를 따른다:

| 설계 공정 코드 | 공정명 | 설명 |
|---------------|--------|------|
| `DESIGN_3D` | 3D 모델링 | 금형 3D 설계 (CAD) |
| `DESIGN_2D` | 2D 도면 작성 | 가공용 2D 도면 출도 |
| `DESIGN_REVIEW` | 설계 검토 | 설계 검증 및 승인 |
| `DESIGN_BOM` | BOM 확정 | 자재 명세 확정 및 구매 연결 |

- [ ] 설계 공정에 대한 작업 지시 생성 (설계자 배정, 예상 소요일)
- [x] 설계 공정 관리 (/design/manage — 프로젝트 그리드 카드 + 모달 방식으로 프로젝트별 설계 공정 추가/삭제, KPI 요약, 검색/필터, 진행률 표시)
- [x] 설계 업무 배정 관리 (/design/assignments 전용 페이지에서 설계자 배정/재배정, 일괄 배정, 미배정 현황)
- [ ] 설계 작업 실적 입력 (투입 시간, 진행률, 산출물)
- [ ] 설계 산출물 관리 (3D 파일, 2D 도면을 공정 단계에 첨부)
- [ ] 설계 검토(Design Review) 승인 워크플로우
- [ ] 설계 완료 시 후속 공정(자재 준비, 가공) 자동 활성화
- [x] 설계 통계 (/design/workload — 공정 상태/유형 분포 차트, 설계자별 공정·시간 비교 차트, 프로젝트별 진행률 테이블, 설계자별 상세 카드)

#### 3.3.3 BOM 관리
- [ ] 금형 BOM 등록/수정
  - 금형 본체 (CORE, CAVITY, 베이스 등)
  - 표준부품 (이젝터 핀, 가이드 핀, 스프링 등)
  - 구매품 (핫러너, 유압 실린더 등)
- [ ] BOM 트리 뷰 / 플랫 뷰 전환
- [ ] BOM 기반 자재 소요량 자동 산출
- [ ] BOM 버전 관리
- [x] BOM 확정(DESIGN_BOM 공정 완료) 시 구매 요청 자동 생성 트리거 (`CreatePurchaseRequestsFromBomUseCase` — BOM 항목별 PR 생성, 기존 PR 멱등 검사, project_id 전파)

#### 3.3.4 설계 변경 관리 (ECO)
- [ ] 설계 변경 요청 (ECR) 등록
- [ ] 설계 변경 지시 (ECO) 승인 워크플로우
- [ ] 변경 영향 분석 (BOM, 공정, 원가 영향)
- [ ] ECO 승인 시 영향받는 공정 단계 자동 재생성/수정
- [ ] 변경 이력 추적

---

### 3.4 생산 관리 (Production)

#### 3.4.1 공정 계획
- [ ] 프로젝트별 공정 계획 수립 (**설계 공정 포함**)
- [ ] 표준 공정 템플릿 관리 (설계부터 트라이아웃까지 전 공정)
  - 사출금형: **3D설계 → 2D도면 → 설계검토 → BOM확정** → 강재입고 → 황삭 → MCT → 방전 → 와이어 → 연마 → 조립 → T/O
  - 프레스금형: **3D설계 → 2D도면 → 설계검토 → BOM확정** → 강재입고 → MCT → 와이어 → 연마 → 조립 → T/O
- [ ] 공정별 예상 소요시간 설정 (설계 공정 포함)
- [ ] 공정 간 선후행 관계 설정
  - 설계 공정 내부: 3D → 2D → 검토 → BOM확정 (순차)
  - 설계 → 가공 경계: BOM확정 완료 → 자재 준비/강재입고 시작
  - 일부 가공 공정은 병렬 진행 가능 (방전 ∥ 와이어)
- [ ] 공정 계획 → 작업 지시 일괄 생성 (설계 작업 지시 포함)

#### 3.4.2 작업 지시 / 실적 관리
- [ ] 작업 지시서 생성 (공정, 설비/담당자, 작업자, 시작/종료 예정일)
  - **설계 작업 지시**: 설비 대신 설계자(담당자) 배정, 산출물 유형 지정
  - **가공 작업 지시**: 설비 + 작업자 배정, 가공 조건 기록
- [ ] 작업 지시서 출력 (바코드/QR 포함)
- [ ] 작업 시작/종료 실적 입력 (설계: 웹 입력 / 현장: 터치/스캔)
- [ ] 작업 실적: 소요시간, 가공 조건(또는 설계 산출물), 특이사항 기록
- [ ] 작업 진행 상태 실시간 업데이트

#### 3.4.3 스케줄링
- [ ] 설비별 일정 관리 (간트 차트)
- [ ] **설계자별 일정 관리** (설계 업무 간트 차트)
- [ ] 드래그 앤 드롭 스케줄 조정 (설계/가공 공정 모두)
- [ ] 설비 부하율 시각화
- [ ] **설계자 부하율 시각화** (담당 프로젝트 수, 투입 시간)
- [ ] 납기 역산 스케줄링 (납기일 기준 역방향 — 설계 소요일 포함)
- [ ] 병목 공정 자동 감지 및 알림 (설계 지연 포함)
- [ ] 작업자별 일정 뷰

#### 3.4.4 외주 관리
- [ ] 외주 공정 정의 (열처리, 도금, 코팅, 특수가공 등)
- [ ] 외주 요청 → 발주 → 출고 → 입고 워크플로우
- [ ] 외주처 관리 (업체 정보, 단가, 리드타임, 품질 이력)
- [ ] 외주 일정 추적 (예정일 vs 실 입고일)
- [ ] 외주비 관리

---

### 3.5 자재/구매 관리 (Material & Procurement)

#### 3.5.1 자재 관리
- [x] 자재 마스터 관리 (/materials/items — 품목 목록, 검색/정렬, DataTable)
- [x] 자재 등록 (/materials/items/new — 자재코드/분류/단위/규격/단가/안전재고/리드타임/공급처 폼)
- [x] 자재 상세 (/materials/items/[id] — 기본정보 + 재고 사이드바 + 입출고 이력, 재고부족 경고)
- [x] 공급처별 단가 비교 (/materials/items/[id] — 공급처별 현재 단가 테이블, 최저가/최고가/평균가 KPI, 기준가 대비 변동률, 가격 분포 시각화)
- [x] 단가 변경 이력 (/materials/items/[id] — 타임라인 형태 단가 변경 이력, 공급처별 필터, 변동률 뱃지, 이전 가격 취소선, 입고 시 자동 이력 생성)
- [ ] 품목별 회계 처리 항목 매핑
  - 품목 마스터에 `회계처리항목` 필드 추가 (예: 원자재, 부재료, 소모품, 외주비)
  - 품목별 입고 차변 계정 매핑(기본: 회계처리항목의 기본 계정, 필요 시 품목별 Override)
  - 구매 시 결제조건(외상/현금)에 따라 대변 계정 자동 선택 (매입채무 또는 현금/예금)
- [ ] 자재 수정/삭제 (상세 페이지에서 인라인 편집 모드)
- [ ] 자재 분류 체계 (대/중/소분류)
- [ ] 안전 재고 설정 및 알림

#### 3.5.2 재고 관리
- [x] 현 재고 현황 조회 (/materials/inventory — KPI 카드 3종 + DataTable, 재고부족 경고)
- [ ] 입고/출고/조정 처리
- [ ] 프로젝트별 자재 출고 (원가 연결)
- [ ] 재고 실사 기능
- [ ] 잔재(端材) 관리 (강재 자투리 재활용)

#### 3.5.3 구매 관리
- [x] 발주 목록 (/materials/purchase-orders — 상태별 필터 탭 + 검색 + 테이블, 서버 페이지네이션)
- [x] 발주 등록 (/materials/purchase-orders/new — 공급처/발주일/납기일 + 품목 라인 동적 추가/삭제 + 합계 자동계산, STEEL 치수 입력)
- [ ] 발주 상세 (/materials/purchase-orders/[id] — 기본정보 + 품목테이블(입고수량/잔량) + 입고이력 + 상태변경 액션)
- [x] BOM 기반 구매 요청 자동 생성 (DESIGN_BOM 완료 → `CreatePurchaseRequestsFromBomUseCase`)
- [x] 구매 요청 → 발주 워크플로우 (`ConvertRequestsToPO` — 프로젝트별 PO 자동 분할, `purchaseOrders[]` 다건 반환)
- [ ] 구매 단가 이력 관리
- [x] 구매요청 목록 (/materials/purchase-requests — 서버 페이지네이션 + 검색 + 상태 필터 + STEEL 치수 컬럼)
- [x] 구매요청 등록 (/materials/purchase-requests/new — 자재/수량/사유/필요일 + STEEL 치수 입력)

#### 3.5.4 거래처 관리 (신규)
- [x] 거래처 목록 (/materials/suppliers — KPI 카드 3종 + DataTable, 업체명/사업자번호 검색)
- [x] 거래처 등록 (/materials/suppliers/new — 업체명/사업자번호/유형/담당자/연락처/이메일/주소/비고 폼)
- [x] 거래처 상세 (/materials/suppliers/[id] — 기본정보 + 발주이력 테이블 + 공급품목 리스트 + 거래통계)
- [x] 거래처 수정/삭제 (상세 페이지 인라인 편집 + 삭제)

#### 3.5.5 입고 관리 (신규)
- [x] 입고 관리 통합 대시보드 (/materials/receiving — 미입고 현황 + 입고 이력 탭 통합)
  - KPI 카드 4종: 이번달 입고건수, 이번달 입고금액, 미입고 발주(납기초과 카운트), 미입고 금액
  - **미입고 현황 탭**: 발주별 아코디언 UI (납기임박 순 정렬)
    - 발주번호 + 거래처 + 상태배지 + 납기초과 경고
    - 납기일 (D-day 카운트다운: N일 남음/오늘 마감/N일 초과)
    - 입고 진행률 프로그레스바 (발주수량 대비 입고수량 %)
    - 미입고 금액 (잔량 × 단가)
    - 바로 입고처리 버튼 → /materials/receiving/new?po={id}
    - 펼침 시 품목별 상세 테이블 (자재코드/자재명/발주수량/입고수량/잔량/단가/미입고금액/진행률)
    - 전체 펼치기/접기 컨트롤
    - 발주번호, 거래처, 자재명 통합 검색
  - **입고 이력 탭**: 전체 입고(IN) StockMovement 테이블 (입고일/자재코드/자재명/수량/단가/금액/발주번호)
- [x] 입고 등록 (/materials/receiving/new — 발주기반 입고(PO 선택→품목 자동로드→입고수량 입력) + 직접 입고 탭)
- [x] 입고 시 재고 자동 증가 + 이동평균 단가 재계산
- [x] 입고 시 발주 상태 자동 변경 (ORDERED → PARTIAL_RECEIVED → RECEIVED)
- [x] 입고 시 공급처별 단가 이력 자동 생성 (MaterialPrice — 단가 변동 시 자동 기록, 입고 자동 등록 메모)
- [x] 입고 시 PO의 project_id를 StockMovement(IN) 및 SteelTag에 전파

#### 3.5.6 프로젝트별 자재 추적 (신규, 구현 완료)
- [x] 프로젝트 상세에 자재/구매 현황 KPI 6종 (구매요청액/발주액/입고액/출고액/미입고/미출고 — `useProjectMaterialSummary`)
- [x] 프로젝트 E2E 타임라인 (수주/설계/구매/생산 4종 이벤트 시간순 — `useProjectTimeline`)
- [x] 데이터 정합성 점검 (/admin/data-integrity — project_id 누락률, 상태 불일치, 문서 연결 누락 3종 지표)

---

### 3.6 품질 관리 (Quality)

#### 3.6.1 검사 관리
- [ ] 입고 검사 (자재/외주품)
- [ ] 공정 중 검사 (CMM 측정 데이터 연동)
- [ ] 최종 검사 체크리스트
- [ ] 검사 성적서 생성

#### 3.6.2 트라이아웃 관리
- [ ] 트라이아웃 계획 등록
- [ ] 트라이아웃 결과 기록 (성형 조건, 불량 내용, 사진)
- [ ] 수정 사항 도출 → 작업 지시 연결
- [ ] 트라이아웃 차수 관리 (T1, T2, T3...)

#### 3.6.3 불량/클레임 관리
- [ ] 불량 유형 분류 (설계 불량, 가공 불량, 조립 불량)
- [ ] 원인 분석 및 대책 기록
- [ ] 고객 클레임 접수 및 처리 이력
- [ ] 불량 통계 분석

---

### 3.7 설비 관리 (Facility)

- [ ] 설비 마스터 관리 (MCT, 방전기, 와이어, 연마기, CNC 등)
- [ ] 설비 상태 관리 (가동, 비가동, 고장, 보전 중)
- [ ] 정기 보전 스케줄 관리
- [ ] 고장 이력 및 수리 기록
- [ ] 설비 가동률 통계

---

### 3.8 원가 관리 (Cost)

- [ ] 프로젝트별 원가 집계
  - **자재비**: BOM 기반 출고 자재 원가
  - **설계 노무비**: 설계 공정 작업 실적 시간 × 설계 인건비 단가
  - **가공 노무비**: 가공 공정 작업 실적 시간 × 현장 인건비 단가
  - **경비**: 설비 감가상각, 전력비 등 배부
  - **외주비**: 외주 발주 금액
- [ ] 견적 원가 vs 실 원가 비교 분석
- [ ] 원가율(원가/매출) 추이 분석
- [ ] 공정별 원가 비중 분석
- [ ] 프로젝트 손익 분석

---

### 3.9 회계/정산 (Accounting)

> 목표: 영업/구매/재고/생산 이벤트를 회계 전표에 **자동 연동**하여,
> 별도 이중 입력 없이 재무 현황(매출채권·매입채무·재고자산·매출원가)을 실시간으로 추적한다.

#### 3.9.1 코드베이스 분석 요약 (현재 구현 기준)
- 영업 이벤트
  - 수주 생성/상태 변경: `hooks/sales/useOrders.ts`, `domain/sales/use-cases/create-order-with-project.ts`
  - 입금 등록: `hooks/sales/usePayments.ts`, `app/sales/orders/[id]/_components/payment-section.tsx`
- 구매/자재 이벤트
  - 발주 생성/수정/입고: `hooks/procurement/usePurchaseOrders.ts`,
    `domain/procurement/use-cases/create-purchase-order.ts`,
    `domain/materials/use-cases/receive-purchase-order.ts`
  - 재고 입출고/조정: `hooks/materials/useStocks.ts`,
    `domain/materials/use-cases/stock-out.ts`,
    `domain/materials/use-cases/receive-direct-stock.ts`,
    `domain/materials/use-cases/adjust-stock.ts`
- 생산 이벤트
  - 작업 완료/실적: `hooks/production/useWorkOrders.ts`, `hooks/production/useWorkLogs.ts`
- 아키텍처 제약
  - 이벤트 진입점은 Hook → UseCase에 집중되어 있어 회계 연동 포인트가 명확함.
  - DI 기준 Supabase Repository는 현재 자재/구매 중심이며(`infrastructure/di/container.ts`), 회계 모듈은 신규 영속 계층 추가가 필요함.

#### 3.9.2 핵심 기능 요구사항
- [x] **자동 분개 엔진**: 도메인 이벤트 발생 시 차변/대변 전표 자동 생성 (ORDER_CONFIRMED, PAYMENT_CONFIRMED, PO_ORDERED, STOCK_OUT — `AutoPostingService` + `PostAccountingEventUseCase`)
- [ ] **AR/AP 보조원장**: 수주별 매출채권, 발주별 매입채무 잔액 추적
- [ ] **재고자산/재공품/제품 전환**: 출고→재공품, 공정완료→제품, 납품→매출원가 자동 반영
- [ ] **분개 추적성**: 전표 ↔ 원천 문서(Order/PO/StockMovement/WorkOrder) 양방향 추적
- [ ] **정정/취소**: 원천 문서 취소 시 반대분개(역분개) 자동 생성
- [ ] **마감 관리**: 월 마감 후 잠금(재처리/수정 제한), 재오픈 승인 프로세스

#### 3.9.3 자동 연동 트리거 & 분개 규칙 (MVP)

| 트리거 이벤트 | 발생 기준(도메인) | 차변(DR) | 대변(CR) | 비고 |
|---|---|---|---|---|
| 판매 발생 | `orders.status=CONFIRMED` | 매출채권(AR) | 매출 | 사용자 요구사항 반영: 판매 시 즉시 채권 인식 |
| 입금 확정 | `payments.status=CONFIRMED` | 보통예금/현금 | 매출채권(AR) | `PENDING`은 분개 없음 |
| 구매 발생 | `purchase_orders.status=ORDERED` | 미착품(선택) | 매입채무(AP) | 회사 정책에 따라 발주시점 채무 인식 가능 |
| 발주 입고(품목매핑) | PO 기반 입고 완료 | 품목 마스터 매핑 계정 (예: 원자재) | 매입채무(AP) 또는 보통예금 | 결제조건(외상/현금) 기준 |
| 직접 입고 | PO 없는 `stock_movements.type=IN` | 원재료 | 매입채무(AP-미매칭) | 사후 증빙 매칭 필요 |
| 자재 출고 | `stock_movements.type=OUT` + `project_id` | 재공품(WIP) | 원재료 | 이동평균 단가 사용 |
| 공정 완료 | 프로젝트 제조 완료 이벤트 | 제품(재고자산) | 재공품(WIP) | 사용자 요구사항 반영: 공정 완료 시 재고자산 계상 |
| 납품 완료 | `projects.status=DELIVERED` | 매출원가(COGS) | 제품(재고자산) | 매출총이익 계산 기반 |

- [ ] 매출 인식 시점 정책(수주확정/출하/세금계산서 발행)은 회사 정책으로 설정 가능해야 함.
- [ ] 모든 자동 분개는 `source_type + source_id + event_type` 기준 멱등(idempotent) 처리해야 함.
- [ ] 품목 매핑 예시: 품목 마스터의 회계처리항목이 `원자재`인 품목을 입고하면
  - 외상 구매: `DR 원자재 / CR 매입채무`
  - 현금 구매: `DR 원자재 / CR 보통예금(또는 현금)`

#### 3.9.4 회계 화면/업무 시나리오
- [ ] `/accounting/item-policies`: 회계처리항목(원자재/부재료/소모품 등)별 기본 계정 정책 관리
- [x] `/accounting/dashboard`: 회계 대시보드 (매출/매입/미수/미지급 KPI)
- [x] `/accounting/journals`: 자동 생성 전표 조회, 원천 문서 링크
- [ ] `/accounting/general-ledger`: 계정별 원장(기간, 거래처, 프로젝트 필터)
- [x] `/accounting/receivables`: 수주별 미수금 에이징(30/60/90일)
- [x] `/accounting/payables`: 발주별 미지급금 에이징
- [ ] `/accounting/closing`: 월 마감, 잠금/재오픈, 마감 로그

#### 3.9.5 단계별 도입 계획
- [x] Step 1 (기반): 계정과목/전표/분개 스키마, 자동분개 엔진 뼈대 — `AutoPostingService`, GL계정 8개, Mock 분개 19건
- [x] Step 2 (필수 자동연동): 판매(ORDER_CONFIRMED)·입금(PAYMENT_CONFIRMED)·발주(PO_ORDERED)·출고(STOCK_OUT) 이벤트 연동
- [ ] Step 3 (제조 연동): 공정완료→제품자산, 납품→매출원가
- [ ] Step 4 (통제): 월마감 잠금, 역분개, 감사로그/권한(회계 승인)

#### 3.9.6 선행 개선 과제 (현재 코드 갭)
- [ ] 입금 상태 확정 플로우 추가: 현재 UI는 입금을 `PENDING`으로 생성하며 `CONFIRMED` 전환 UX가 부재함.
- [ ] 프로젝트 제조 완료 이벤트 정의: 현재는 개별 WorkOrder 완료는 있으나, 재공품→제품 전환을 위한 “프로젝트 제조 완료” 도메인 이벤트가 없음.
- [ ] 납품/출하 상태 전이 정합화: `projects.status=DELIVERED` 전환의 표준 경로를 확정해 매출원가 인식 시점 고정 필요.

---

### 3.10 시스템 관리 (Admin)

- [ ] 사용자 관리 (직원 등록, 역할 배정)
- [ ] 역할 기반 접근 제어 (RBAC)
  - 관리자, 영업, 설계, 생산관리, 현장, 구매, 품질, 회계
- [ ] 공통 코드 관리 (금형 종류, 공정 코드, 불량 유형 등)
- [ ] 알림 설정 (이메일, 인앱)
- [ ] 감사 로그 (주요 데이터 변경 이력)
- [ ] 데이터 백업/복원

---

### 3.11 통계/분석 (Statistics & Analytics)

> 각 모듈의 데이터를 종합하여 경영 의사결정에 필요한 통계 분석 기능을 제공한다.
> 기간별 필터(일/주/월/분기/연도/사용자 지정)를 공통으로 지원한다.

#### 3.11.1 영업 통계
- [ ] 매출 추이 분석 (월별/분기별/연도별 매출 차트)
- [ ] 수주 현황 통계 (수주 건수, 수주 금액 추이)
- [ ] 고객별 매출 분석 (고객별 매출 비중, 상위 고객 랭킹)
- [ ] 금형 종류별 수주 분석 (사출/프레스/다이캐스팅 비율)
- [ ] 수주-납품 리드타임 분석 (평균 리드타임, 추이)
- [ ] 입금 현황 분석
  - 입금률 추이 (월별 입금 완료 비율)
  - 미수금 에이징 분석 (30일/60일/90일/90일 초과)
  - 입금 방법별 통계 (계좌이체/어음/수표/현금 비율)
  - 고객별 입금 현황 및 평균 회수 기간
  - 고객별 미수금 현황 분석 (고객별 수주액/입금완료액/미수금액/수금률 종합 테이블)
- [ ] 견적 전환율 분석 (견적 → 수주 전환율, 실패 사유 분석)

#### 3.11.2 생산 통계
- [ ] 납기 준수율 (기간별 납기 준수/지연 비율, 평균 지연일수)
- [ ] 공정별 소요시간 분석 (예상 vs 실적 비교, 공정별 편차)
- [ ] 작업자별 생산성 분석 (투입 시간, 완료 건수, 효율)
- [ ] 설비 가동률 분석 (설비별 가동/비가동/고장 비율, 추이)
- [ ] 설계자별 업무 부하 분석 (담당 프로젝트 수, 투입 시간)
- [ ] 외주 현황 통계 (외주 비율, 외주처별 납기 준수율, 외주비 추이)
- [ ] 병목 공정 분석 (지연 빈도 상위 공정, 대기시간 분석)

#### 3.11.3 품질 통계
- [ ] 불량률 추이 (월별 불량 발생 건수/비율)
- [ ] 불량 유형별 분석 (설계/가공/조립/자재 불량 파레토 차트)
- [ ] 트라이아웃 차수 분석 (평균 T/O 횟수, 1회 통과율)
- [ ] 검사 합격률 추이 (입고/공정/최종 검사 합격률)
- [ ] 고객 클레임 통계 (클레임 건수 추이, 유형별 분석, 처리 기간)
- [ ] 품질 비용 분석 (재작업 비용, 불량 손실 비용)

#### 3.11.4 원가 통계
- [ ] 프로젝트 수익성 분석 (견적가 vs 실 원가, 이익률 분포)
- [ ] 원가 구성 비율 분석 (자재비/노무비/경비/외주비 비중 추이)
- [ ] 금형 종류별 평균 원가율 비교
- [ ] 공정별 원가 비중 분석 (어떤 공정이 가장 비용이 큰지)
- [ ] 적자 프로젝트 분석 (적자 건 목록, 원인별 분류)

#### 3.11.5 자재/구매 통계
- [ ] 자재 소비 추이 (품목별 월별 사용량)
- [ ] 구매 금액 추이 (공급업체별, 자재 카테고리별)
- [ ] 재고 회전율 분석 (자재별 회전율, 장기 체류 재고)
- [ ] 공급업체 납기 준수율 (업체별 납기 준수 성과)

#### 3.11.6 경영 종합 통계
- [ ] 경영 요약 대시보드 (매출, 수주잔고, 미수금, 가동률, 납기 준수율 KPI)
- [ ] 월간/분기별 경영 리포트 자동 생성
- [ ] 전년 동기 대비 분석 (YoY 비교)
- [ ] 부서별 실적 요약 (영업, 생산, 품질 부서별 핵심 지표)

---

